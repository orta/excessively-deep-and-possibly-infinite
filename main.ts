namespace SpriteKind {
    export const progressBar = SpriteKind.create()
    export const TaggingSpot = SpriteKind.create()
}
namespace myTiles {
    //% blockIdentity=images._tile
    export const tile0 = img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`
    //% blockIdentity=images._tile
    export const tile1 = img`
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
b b b b b b b b b b b b b b b 8 
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 
`
    //% blockIdentity=images._tile
    export const tile3 = img`
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
`
    //% blockIdentity=images._tile
    export const tile4 = img`
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
f f f f f f f f f f f f f f f f 
e e 9 9 e 9 9 e e e e e e e e e 
a e 9 9 e 9 9 e 9 9 9 9 9 9 9 9 
a a e e a e e a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
b b b b b b b b b b b b b b b 8 
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 
`
    //% blockIdentity=images._tile
    export const tile5 = img`
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
b b b b b b b b b b b b b b b b 
c c c c c c c c c c c c c c c c 
f f f e c c f f f e c c f f f e 
f e f f c c f e f f c c f e f f 
e f f f c c e f f f c c e f f f 
f f f f c c f f f f c c f f f f 
a b b b c c b b b b c c b b b b 
c c c c c c c c c c c c c c c c 
c c c c c c c c c c c c c c c c 
c c c c c c c c c c c c c c c c 
c c c c c c c c c c c c c c c c 
c c c c c c c c c c c c c c c c 
`
    //% blockIdentity=images._tile
    export const tile6 = img`
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
b b b b b b b b b b b b b b b b 
c c c c c c c c c c c c c c c c 
f f c c c b b b b b b c c c f e 
f e c c b f f b b f f b c c f f 
e f c c b f e b b f e b c c f f 
f f c c b f f b b f f b c c f f 
a b c c b c b b b b c b b c b b 
c c c c b f f b b f f b b c c c 
c c c c b e f b b e f b b c c c 
c c c c b f f b b f f b c c c c 
c c c c b f f b b f f b c c c c 
c c c c b f f b b f f b c c c c 
`
    //% blockIdentity=images._tile
    export const tile7 = img`
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
b b b b b b b b b b b b b b b b 
a b c c c c c c c c c c c c c c 
a b f e c c f f f e c c f f f e 
a b d f c c f e f f c c f e f f 
a b d f c c e f f f c c e f f f 
a b d d c c f f f f c c f f f f 
a b d d c c b b b b c c b b b b 
a b f b c c c c c c c c c c c c 
a b f b c c c c c c c c c c c c 
a b b c c c c c c c c c c c c c 
a b c c c c c c c c c c c c c c 
a b c c c c c c c c c c c c c c 
`
    //% blockIdentity=images._tile
    export const tile8 = img`
f f f f f f f f f f f f f f f a 
f f f f f f f f f f f f f f f a 
f f f f f f f f f f f f f f f a 
f f f f f f f f f f f f f f f a 
b b b b b b b b b b b b b b b a 
c c c c c c c c c c c c c c a a 
f f f f c c f f f e c c f f a a 
f f f f c c f e f f c c f e a a 
f f f f c c e f f f c c e f a a 
f f f f c c f f f f c c f f a a 
b b b b c c b b b b c c b b a a 
c c c c c c c c c c c c c c a a 
c c c c c c c c c c c c c c a a 
c c c c c c c c c c c c c c a a 
c c c c c c c c c c c c c c c a 
c c c c c c c c c c c c c c c a 
`
    //% blockIdentity=images._tile
    export const tile9 = img`
f f f f f f a a a f f f f f f f 
f f f f f f a a a f f f f f f f 
f f f f f f a a a f f f f f f f 
f f f f f f a a a f f f f f f f 
b b b b b b a a a b b b b b b b 
c c c c c c a a a c c c c c c c 
f f f e c c a a a c c c f f f e 
f e f f c c e a e c c c f e f f 
e f f f c c a e a c c c e f f f 
f f f f c c a a a c c c f f f f 
a b b b c c a a a c c c b b b b 
c c c c c c e e e c c c c c c c 
c c c c c c e e e c c c c c c c 
c c c c c c e e e c c c c c c c 
c c c c c c a a a c c c c c c c 
c c c c c c a a a c c c c c c c 
`
    //% blockIdentity=images._tile
    export const tile10 = img`
d d d d d a a a a a d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d f a f d d d d d d d 
d d d d d d a f a d d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d a a a d d d d d d d 
d d d d d d a a a d d d d d d d 
`
    //% blockIdentity=images._tile
    export const tile11 = img`
a d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
d d d d d d d d d d d d d d d d 
`
    //% blockIdentity=images._tile
    export const tile12 = img`
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 8 8 8 8 8 7 8 8 8 8 7 8 8 8 7 
7 8 8 8 8 8 7 8 8 8 8 7 8 8 8 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 8 8 8 7 8 8 8 7 8 8 8 8 8 8 7 
7 8 8 8 7 8 8 8 7 8 8 8 8 8 8 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 8 8 8 8 8 8 8 7 8 8 8 7 8 8 7 
7 8 8 8 8 8 8 8 7 8 8 8 7 8 8 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 8 8 8 7 8 8 8 8 8 8 7 8 8 8 7 
7 8 8 8 7 8 8 8 8 8 8 7 8 8 8 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 8 8 8 8 7 8 8 8 7 8 8 8 8 8 7 
7 8 8 8 8 7 8 8 8 7 8 8 8 8 8 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
`
    //% blockIdentity=images._tile
    export const tile13 = img`
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
f f f f f f f f f f f f f f f f 
d d 6 6 d d 6 6 d d 6 6 d d 6 6 
7 7 6 6 7 7 6 6 7 7 6 6 7 7 6 6 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
`
    //% blockIdentity=images._tile
    export const tile14 = img`
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
f f f f f f f f f f f f f f f f 
6 6 a a 6 6 a a 6 6 a a 6 6 a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
b b b b b b b b b b b b b b b 8 
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 
`
    //% blockIdentity=images._tile
    export const tile16 = img`
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
f f f f f f f f f f f f f f f f 
6 6 a a 6 6 a a 6 6 a a 6 6 a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
a a a a a a a a a a a a a a a 8 
b b b b b b b b b b b b b b b 8 
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 
`
}
function advanceProgressBar (frame: number) {
    progressBar2.setImage(progressBarFrames[frame])
    if (controller.A.isPressed()) {
        if (frame < progressBarFrames.length) {
            taggingTimeout = setTimeout(function () {
                advanceProgressBar(frame + 1);
            }, 250);
        } else {
            completeTagging()
        }
    }
}
function startTagging () {
    isTagging = true
    progressBar2.setFlag(SpriteFlag.Invisible, false)
    progressBar2.x = tagger.x
    progressBar2.y = tagger.y - 10
    advanceProgressBar(0)
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    tagger.setImage(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . f f 9 9 . . . . . . . 
. . . . . f 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`)
})
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    tagger.setImage(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . f f f f . . . . . . . 
. . . . . 9 f f 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 3 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`)
})
function cancelTagging () {
    music.stopAllSounds()
    isTagging = false
    clearTimeout(taggingTimeout);
progressBar2.setFlag(SpriteFlag.Invisible, true)
}
function completeTagging () {
    cancelTagging()
    music.baDing.play()
    info.changeScoreBy(1)
    Tag = sprites.create(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . 1 . . . . . . . 
. . . . . 1 1 1 . . . . 1 . . . 
. . 1 1 1 1 . . . 1 . 1 . . . . 
. . 1 1 . . . . . 1 1 . . . 1 . 
. 1 1 . 1 . . 1 1 . . . . 1 1 . 
. 1 . . 1 . 1 1 . . . . 1 1 . . 
. . . . 1 1 1 . . . . . 1 . . . 
. 1 . . . 1 1 . . . . 1 . . . . 
. 1 . . . 1 1 . . . 1 1 . . . . 
. . 1 1 1 1 . 1 . 1 . . . . . . 
. . 1 1 . . . . 1 1 . . . . . . 
. . . . 1 . . 1 . 1 1 . . . . . 
. . . . 1 1 . . . . 1 1 1 . . . 
. . . . . . . . . . . . . . . . 
`, SpriteKind.Food)
    Tag.x = tagger.x
    Tag.y = tagger.y - 20
    moveTaggingSpot()
}
function moveTaggingSpot () {
    tiles.placeOnRandomTile(tagTarget, myTiles.tile4)
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    distX = Math.abs(tagger.x) - Math.abs(tagTarget.x)
    distY = Math.abs(tagger.y) - Math.abs(tagTarget.y)
    if (distX < 20 && distY < 20) {
        startTagging()
        tagger.setImage(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . 9 . 9 9 9 9 . 9 . . . . . 
. . . . 9 . . . . 9 . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`)
    }
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    tagger.setImage(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 f f . . . . . . . 
. . . . . 9 9 9 f . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 3 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.TaggingSpot, function (sprite, otherSprite) {
    otherSprite.setImage(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
. 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . 
. 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . 
`)
})
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    tagger.setImage(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . 9 9 9 9 . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`)
})
controller.A.onEvent(ControllerButtonEvent.Released, function () {
    cancelTagging()
})
let distY = 0
let distX = 0
let Tag: Sprite = null
let isTagging = false
let tagger: Sprite = null
let tagTarget: Sprite = null
let progressBar2: Sprite = null
let progressBarFrames: Image[] = []
let progressTimer = null
let taggingTimeout = 0
let isMoving = false
let tagTile = null
progressBarFrames = [img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 3 3 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . 9 
9 3 3 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . 9 
9 3 3 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`, img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 3 3 3 3 3 3 . . . . . . . . . . . . . . . . . . . . . . . . 9 
9 3 3 3 3 3 3 . . . . . . . . . . . . . . . . . . . . . . . . 9 
9 3 3 3 3 3 3 . . . . . . . . . . . . . . . . . . . . . . . . 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`, img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . . . . . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . . . . . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . . . . . . . . . . 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`, img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . . . . . . . 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`, img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . . . . 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`, img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . . . . 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`, img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . . . . 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`, img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . . . . 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`, img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 . . . 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`, img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 9 
9 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`]
progressBar2 = sprites.create(img`
. 
`, 0)
tiles.setTilemap(tiles.createTilemap(
            hex`28001c0008080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808080808081b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b080808080808080808080808080808080808080808081b020202020202020202020202020202021b0808080e0303030303030308080808080808080808081b021911111111111811111111020202021b0808080e0303030303030308080808080808080808081b1e15131413131317131413161e1e1e1e1b0808080e0303030303030308080808080808080808081b1f12121212121212121212121f1f1f1f1b1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d0808081b020202020202020202020202020202021b0808080e0303030303030308080808080808080808081b021911111111110202021911111111111b0808080e0303030303030308080808080808080808081b1f1514131413161e1e1e1514131313161b0808080e0303030303030308080808080808080808081b1f1212121212121f1f1f1212121212121b1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d0808081b020202020202020202020202020202021b0808080e0303030303030308080808080808080808081b111111111118111111111111020202021b0808080e0303030303030308080808080808080808081b1313141313171413131313161e1e1e1e1b0808080e0303030303030308080808080808080808081b1212121212121212121212121f1f1f1f1b1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d0808081b020202020202020202020202020202021b0808080e0303030303030308080808080808080808081b021911111111111102191111111111021b0808080e0303030303030308080808080808080808081b1e151413131413161e1314131314161e1b0808080e0303030303030308080808080808080808081b1f1212121212121202121212121212021b1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d0808081b020202020202020202020202020202021b0808080e0303030303030308080808080808080808081b020202021911111111111111020202021b0808080e0303030303030308080808080808080808081b1e1e1e1e15131413131413161e1e1e1e1b0808080e0303030303030308080808080808080808081b1f1f1f1f12121212121212121f1f1f1f1b1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d0808081b020202020202020202020202020202021b080808080803030308080808080808080808080808081b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b080808080803031c08080808080808080808080808081b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b080808080803031c08080808080808080808080c0c0c0303030303030303030303030303030303030c0c0c0c0c0303030c0c0c0c0c0c0c0c0c0c0c03030303030303030303030303030303030303030303030303030303030303030303030303030303`,
            img`
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . . . . . . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . 2 2 2 2 2 2 2 2 2 2 2 . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . 2 2 2 2 2 2 2 2 2 2 2 . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . . . . . . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . . . . . . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . 2 2 2 2 2 2 . . . 2 2 2 2 2 2 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . 2 2 2 2 2 2 . . . 2 2 2 2 2 2 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . . . . . . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . . . . . . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 2 2 2 2 2 2 2 2 2 2 2 2 . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 2 2 2 2 2 2 2 2 2 2 2 2 . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . . . . . . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . . . . . . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . 2 2 2 2 2 2 2 . 2 2 2 2 2 2 . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . 2 2 2 2 2 2 2 . 2 2 2 2 2 2 . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . . . . . . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . . . . . . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . 2 2 2 2 2 2 2 2 . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . 2 2 2 2 2 2 2 2 . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 . . . . . . . . . . . . . . . . 2 . . . . . . . . . . . . . . . . . . . 
. . . 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
`,
            [myTiles.tile0,sprites.builtin.forestTiles23,myTiles.tile1,sprites.castle.tilePath5,sprites.builtin.brick,sprites.vehicle.roadVertical,sprites.vehicle.roadHorizontal,sprites.dungeon.doorOpenNorth,sprites.castle.tileGrass1,sprites.castle.tilePath1,sprites.castle.tileGrass2,sprites.castle.tileGrass3,sprites.castle.tilePath2,sprites.castle.tilePath7,sprites.castle.tilePath4,sprites.castle.tilePath8,sprites.builtin.forestTiles24,myTiles.tile3,myTiles.tile4,myTiles.tile5,myTiles.tile6,myTiles.tile7,myTiles.tile8,myTiles.tile9,myTiles.tile10,myTiles.tile11,sprites.builtin.coral2,myTiles.tile12,sprites.castle.tilePath6,myTiles.tile13,myTiles.tile14,myTiles.tile16],
            TileScale.Sixteen
        ))
tagTarget = sprites.create(img`
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . 1 1 1 1 1 1 1 1 . . . . . . 
. . . 1 1 1 . . . . . . . . 1 1 1 . . . 
. 1 1 . . . . . . . . . . . . . . 1 1 . 
1 . . . . . . . . 1 1 . . . . . . . . 1 
1 . . . . . . . . 1 1 . . . . . . . . 1 
. 1 1 . . . . . . . . . . . . . . 1 1 . 
. . . 1 1 1 . . . . . . . . 1 1 1 . . . 
. . . . . . 1 1 1 1 1 1 1 1 . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . 
`, SpriteKind.TaggingSpot)
tagger = sprites.create(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 9 9 9 9 9 9 . . . . . 
. . . . . 9 9 9 9 9 9 . . . . . 
. . . . . 9 9 9 9 9 9 . . . . . 
. . . . . . 9 9 9 9 . . . . . . 
. . . . . . . 9 9 . . . . . . . 
. . . . . . 9 9 9 9 . . . . . . 
. . . . . 9 9 9 9 9 9 . . . . . 
. . . . . 9 9 9 9 9 9 . . . . . 
. . . . . 9 9 9 9 9 9 . . . . . 
. . . . . 9 9 9 9 9 9 . . . . . 
. . . . . 9 9 9 9 9 9 . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`, SpriteKind.Player)
scene.cameraFollowSprite(tagger)
controller.moveSprite(tagger)
game.onUpdate(function () {
    if (controller.dx() != 0 || controller.dy() != 0) {
        cancelTagging()
    }
})
